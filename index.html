<html>
<head>
	<title>MURRY'S True Value Hardware</title>
  
  <!-- jQuery 2.1.3 [Google Hosted] -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  
  <!-- GOOGLE MAPS API -->
  <script src="https://maps.googleapis.com/maps/api/js"></script>
  <script>
    function initialize() {
      var mapCanvas = document.getElementById('map');
      var storeLatLang = new google.maps.LatLng(40.641542, -73.936557);
      var mapOptions = {
        center: storeLatLang,
        zoom: 17,
        mapTypeId: google.maps.MapTypeId.SATTELLITE,
        backgroundColor: "white",
        mapMarker: true
      };
      
      // global so that it can be accessed and refreshed when location section loads
      map = new google.maps.Map(mapCanvas, mapOptions);
   
      var styles = [{ "featureType" :"landscape",
                "elementType" :"geometry.fill",
                "stylers"     :[{"color":"#d3d3d3"}]},
              { "featureType" :"landscape",
                "elementType" :"geometry.stroke",
                "stylers"     :[{"color":"#ffffff"}]},
              { "featureType" :"poi",
                "elementType" :"labels.icon",
                "stylers"     :[{"saturation":-96}]}
              ];
      map.setOptions({styles: styles});
      
      var contentString = "<h1>Murry's True Value Hardware</h1>" +
      '<p>4214 Avenue D</p>' +
      '<p>Brooklyn, NY 11203</p>';
      infoWindow = new google.maps.InfoWindow({
        content: contentString
      });
     
      marker = new google.maps.Marker({
        position: map.getCenter(),
        icon: {
          path: google.maps.SymbolPath.CIRCLE,
          strokeColor: '#FF0000',
          strokeOpacity: 0.5,
          strokeWeight: 30,
          fillColor: 'black',            
          fillOpacity: 0.5,
          scale: 3
        },
        map: map
      });
      // Displays infoWindow whem marker is clicked
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.open(map,marker);
      });
      // Shows infoWindow when map initialized
      infoWindow.open(map,marker);

    }
    google.maps.event.addDomListener(window, 'load', initialize); 
    
  </script>
  
  <!-- CUSTOM FONTS [GOOGLE FONTS] -->
  <link href='http://fonts.googleapis.com/css?family=Trade+Winds|Iceland|Expletus+Sans:700' rel='stylesheet' type='text/css'>
  
  <!-- CSS defaults -->
  <link rel="stylesheet" type="text/css" href="default.css">
  
  <!-- CSS for mobile -->
  <link rel="stylesheet" media="screen and (max-device-width: 450px), screen and (max-device-height: 450px)" href="mobile.css">
    <link rel="stylesheet" media="screen and (max-device-width: 450px), screen and (max-device-height: 450px)" href="mobile_sm.css">
</head>

<body>
<div id="main">
	<div id="left">
		<div id="site-name">Murry's <br>True Value <br>Hardware</div>
		<nav>
			<button onclick="displaySection('about')" class="btn btn-about">About</button>
			<button onclick="displaySection('contact')" class="btn btn-contact">Contact</button>
			<button onclick="displaySection('hours')" class="btn btn-hours">Store Hours</button>
			<button onclick="displaySection('location')" class="btn btn-location">Location</button>
		</nav>
	</div>
	<div id="right">
    <div id="section-wraper">
  		<section id="about">
  		<h1>About Us</h1>
      <p id="statement">Murry's True Value Hardware is a family owned small business, serving our local community since 1948.</p>
  		<p>Come visit us at</p>
      <p class="center">4214 Avenue D</p>
      <p class="center">Brooklyn NY, 11203</p>
      <p>We're open</p>
      <p class="center">Mon - Sat : 9am - 6:30pm</p>
      <p>Call us at (718) 629-9555</p>
      <p>Fax us at (718) 629-9666</p>
  		</section>
  		<section id="contact">
  			<h1>Contact Us</h1>
  			<div id="telephone">
          <table>
  				<tr><th>TEL</th><td><a id="tele-num" href="tel://1-718-629-9555">(718) 629-9555</a></td></tr>
  				<tr><th>FAX</th><td>(718) 629-9556</td></tr>
        </table>
  			</div>
  		</section>
  		<section id="location" class="focus">
  			<h1>Visit Us</h1>
        <div id="map-wraper" onclick="expandMap()">
        <a href="#" class="close">CLOSE</a>
        <p id="map"></p>
        </div>
  		</section>
  		<section id="hours">
  			<h1>Store Hours</h1>
  			<div class="section-content">
  				<table>
  				  <tr><th class="day">Mon</th><td class="hour">9:00am - 6:30pm</td></tr>
  				  <tr><th class="day">Tue</th><td class="hour">9:00am - 6:30pm</td></tr>
  				  <tr><th class="day">Wed</th><td class="hour">9:00am - 6:30pm</td></tr>
  				  <tr><th class="day">Thur</th><td class="hour">9:00am - 6:30pm</td></tr>
  				  <tr><th class="day">Fri</th><td class="hour">9:00am - 6:30pm</td></tr>
  				  <tr><th class="day">Sat</th><td class="hour">9:00am - 6:30pm</td></tr>
  				  <tr><th class="day">Sun</th><td class="hour">CLOSED</td></tr>
  				</table>
  			</div>
      </section>  
    </div>
	</div>
  <footer>
    <a target="_blank"  href="https://www.google.com/maps/dir//Murry%27s+True+Value+Hardware,+4214+Avenue+D,+Brooklyn,+NY+11203/@40.64145,-73.936507,17z/data=!4m8!4m7!1m0!1m5!1m1!1s0x89c25b5870f766f3:0x7c060d9bcd50f5a8!2m2!1d-73.936507!2d40.64145">4214 Avenue D, Brooklyn NY 11203</a>
    <span class="divider">&middot;</span>718 629-9555<span class="divider">&middot;</span>
    <a target="_blank" href="http://ww3.truevalue.com/murrystruevalue/Home.aspx">truevalue.com</a>
  </footer>
</div>

<!-- Zepto.js [JavaScript Library, jQuery alternative] -->
<script src=zepto.min.js></script>
<script>
  $("#map").on("click", function(e) {
    if ($("#map-wraper").hasClass("wraper-expanded")) {
      e.stopPropagation();
    }
  });
  
  function expandMap () {
  console.log("expand map");
    $("#map-wraper").toggleClass("wraper-expanded");
    google.maps.event.trigger(map, "resize");
    map.setCenter(new google.maps.LatLng(40.641542, -73.936557));
  };


  function displaySection(new_section_id) {
    var new_section = $("#" + new_section_id);
    var cur_section = $(".focus"); // undefined, about, contact, location, hours
    var cur_section_id = cur_section.attr('id');

    // remove focus from current section shift-top css class if present
    // in preparation for adding focus to a new section
    if (cur_section_id !== undefined){
      // if current_section is same as new_section, no action necessary
      if(cur_section_id === new_section_id){
        return;
      }
      cur_section.removeClass('focus').removeClass('shift-top');
    }
    // if cur_section_id is undefined, cur_section_id > new_section_id == false
    if (cur_section_id > new_section_id) {
      new_section.addClass('shift-top');
    }
    // wait 10 milliseconds to ensure (if necessary) section is moved to 
    // top by prev statement before sliding into position
    setTimeout(function(){
      new_section.addClass('focus');
    }, 10);
    // fix: when google map changes size, doesn't automatically refocus center
    if (new_section_id == "location"){
      // wait 10 milliseconds to ensure section becomes in focus before map refresh
      setTimeout(function(){
        google.maps.event.trigger(map, "resize");
        map.setCenter(new google.maps.LatLng(40.641542, -73.936557));
      }, 10);
    }
  };
</script>
</body>
</html>